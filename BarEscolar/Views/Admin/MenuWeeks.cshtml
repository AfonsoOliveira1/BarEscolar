@model IEnumerable<BarEscolar.Models.MenuWeek>

<h1 class="page-title">Semanas de Menu</h1>

<div class="dashboard-actions">
    <a class="btn admin-btn" asp-action="CreateWeek" asp-route-id="@ViewBag.User.ID">Nova Semana</a>
</div>

<div class="admin-table-wrapper mt-4">
    <table class="admin-table">
        <thead>
            <tr>
                <th>Semana</th>
                <th>Total de Dias</th>
                <th>Ações</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var w in Model)
            {
                var totalDias = w.menuDays
                .Select(d => d.Date.Date)
                .Distinct()
                .Count();
                <tr>
                    <td>@w.weekstart</td>
                    <td>@totalDias dias</td>
                    <td>
                        <a asp-action="EditWeek" asp-route-weekid="@w.id" asp-route-id="@ViewBag.User.ID" method="get" class="btn admin-btn-warning btn-sm">Editar</a>
                        <form asp-action="DeleteWeek" asp-route-weekid="@w.id" asp-route-id="@ViewBag.User.ID" method="post" style="display:inline-block">
                            <button class="btn admin-btn-danger btn-sm"
                                    onclick="return confirm('Apagar esta semana?');">
                                Apagar
                            </button>
                        </form>
                    </td>
                </tr>
            }
        </tbody>
    </table>
    <div class="mt-3">
        <a asp-controller="Admin" asp-action="Index" asp-route-id="@ViewBag.User.ID" class="btn admin-btn-secondary">Voltar ao Dashboard</a>
    </div>
</div>

